---
// Layout.astro - è¯­è¨€åˆ‡æ¢é€»è¾‘å·²ä¼˜åŒ–ï¼Œæ— éœ€ä¿®æ”¹

interface Props {
	title: string;
}

const { title } = Astro.props;

import LanguageSwitcher from '../components/LanguageSwitcher.astro';

// ğŸ† æœ€ç»ˆä¿®å¤æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ„é€ è¯­è¨€åˆ‡æ¢ URL
// 1. è·å–å½“å‰è¯­è¨€
const currentLocale = Astro.currentLocale || 'zh';

// 2. ä½¿ç”¨ Astro.url.pathname æ‰‹åŠ¨æ„é€ åˆ‡æ¢ URL
const currentUrl = Astro.url;

const getSwitchUrl = (targetLocale: 'zh' | 'en'): string => {
Â  Â  let newPath = currentUrl.pathname;
Â  Â Â 
Â  Â  // ç§»é™¤å½“å‰è¯­è¨€å‰ç¼€ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
Â  Â  if (currentLocale !== 'zh' && newPath.startsWith(`/${currentLocale}`)) {
Â  Â  Â  Â  newPath = newPath.replace(`/${currentLocale}`, '');
Â  Â  }
Â  Â Â 
Â  Â  if (newPath === '') {
Â  Â  Â  Â  newPath = '/';
Â  Â  }

Â  Â  // æ·»åŠ ç›®æ ‡è¯­è¨€å‰ç¼€ï¼ˆå¦‚æœç›®æ ‡ä¸æ˜¯é»˜è®¤è¯­è¨€ 'zh'ï¼‰
Â  Â  if (targetLocale !== 'zh') {
Â  Â  Â  Â  // ç¡®ä¿è·¯å¾„ä¸é‡å¤æ–œæ ï¼Œä¾‹å¦‚ /en/about
Â  Â  Â  Â  return `/${targetLocale}${newPath === '/' ? '' : newPath}`;
Â  Â  } else {
Â  Â  Â  Â  // å¦‚æœç›®æ ‡æ˜¯é»˜è®¤è¯­è¨€ (zh)ï¼Œåˆ™ä¸åŠ å‰ç¼€
Â  Â  Â  Â  return newPath;
Â  Â  }
};

const zhUrlPath = getSwitchUrl('zh');
const enUrlPath = getSwitchUrl('en');

---

<!doctype html>
<html lang={currentLocale}>Â 
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anton&family=Hanken+Grotesk:wght@300;400&display=swap" rel="stylesheet">	<meta name="generator" content={Astro.generator} />
		<title>{title}</title>

	</head>
	<body>
Â  Â  Â  Â  <LanguageSwitcherÂ 
Â  Â  Â  Â  Â  Â  currentLocale={currentLocale}Â 
Â  Â  Â  Â  Â  Â  zhUrl={zhUrlPath}Â 
Â  Â  Â  Â  Â  Â  enUrl={enUrlPath}Â 
Â  Â  Â  Â  />
Â  Â  Â  Â Â 
		<slot />
	</body>
</html>
<style is:global>
	section{
		background-color: #adc2c9ff;
	}
	h1, h2,li{
		font-family: 'Anton', 'sans-serif';
	}
	p{
		font-family: 'Hanken Grotesk','sans-serif';
	}
	.yellowBG{
		background-color: #359cacff;
	}
	.yellowText{
		color: #2d98a8ff;
	}
</style>